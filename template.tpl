___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "InMobi CMP Template",
  "categories": [
    "TAG_MANAGEMENT"
  ],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "This template is specifically for\nintegrating Google Consent mode with the InMobi CMP",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "pCode",
    "displayName": "Enter InmobiChoice - UTID",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "domain",
    "displayName": "Enter InmobiChoice - Domain",
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "name": "dataLayerPush",
    "displayName": "Enter Enter InmobiChoice - Data Layer Push",
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "name": "ccpaMessageId",
    "displayName": "Enter InmobiChoice - CCPA message id",
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "name": "ccpa",
    "displayName": "Enter InmobiChoice - CCPA",
    "simpleValueType": true
  },
  {
    "type": "SELECT",
    "name": "ad_storage",
    "displayName": "Select Ad Storage",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "granted",
        "displayValue": "Granted"
      },
      {
        "value": "denied",
        "displayValue": "Denied"
      },
      {
        "value": "na",
        "displayValue": "Not Applicable"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "na"
  },
  {
    "type": "SELECT",
    "name": "ad_user_data",
    "displayName": "Select Ad User Data",
    "selectItems": [
      {
        "value": "granted",
        "displayValue": "Granted"
      },
      {
        "value": "denied",
        "displayValue": "Denied"
      },
      {
        "value": "na",
        "displayValue": "Not Applicable"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "na"
  },
  {
    "type": "SELECT",
    "name": "analytics_storage",
    "displayName": "Select Analytics Storage",
    "selectItems": [
      {
        "value": "granted",
        "displayValue": "Granted"
      },
      {
        "value": "denied",
        "displayValue": "Denied"
      },
      {
        "value": "na",
        "displayValue": "Not Applicable"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "na"
  },
  {
    "type": "SELECT",
    "name": "functionality_storage",
    "displayName": "Select Functionality Storage",
    "selectItems": [
      {
        "value": "granted",
        "displayValue": "Granted"
      },
      {
        "value": "denied",
        "displayValue": "Denied"
      },
      {
        "value": "na",
        "displayValue": "Not Applicable"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "na"
  },
  {
    "type": "SELECT",
    "name": "personalization_storage",
    "displayName": "Select Personalization Storage",
    "selectItems": [
      {
        "value": "granted",
        "displayValue": "Granted"
      },
      {
        "value": "denied",
        "displayValue": "Denied"
      },
      {
        "value": "na",
        "displayValue": "Not Applicable"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "na"
  },
  {
    "type": "SELECT",
    "name": "ad_personalization",
    "displayName": "Select Ad Personalization",
    "selectItems": [
      {
        "value": "granted",
        "displayValue": "Granted"
      },
      {
        "value": "denied",
        "displayValue": "Denied"
      },
      {
        "value": "na",
        "displayValue": "Not Applicable"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "na"
  },
  {
    "type": "SELECT",
    "name": "security_storage",
    "displayName": "Select Security Storage",
    "selectItems": [
      {
        "value": "granted",
        "displayValue": "Granted"
      },
      {
        "value": "denied",
        "displayValue": "Denied"
      },
      {
        "value": "na",
        "displayValue": "Not Applicable"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "na"
  },
  {
    "type": "CHECKBOX",
    "name": "urlPassthrough",
    "checkboxText": "Pass through URL parameters",
    "simpleValueType": true,
    "help": "https://developers.google.com/tag-platform/tag-manager/templates/consent-apis#url-passthrough"
  },
  {
    "type": "CHECKBOX",
    "name": "adsRedaction",
    "checkboxText": "Ads Data Redaction",
    "simpleValueType": true,
    "help": "https://developers.google.com/tag-platform/tag-manager/templates/consent-apis#data-redaction"
  },
  {
    "type": "CHECKBOX",
    "name": "overrideTemplateDefaultConsents",
    "checkboxText": "Do you wish to override the portal default consents with GTM template?",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const log = require('logToConsole');
const injectScript = require('injectScript');
const setDefaultConsentState = require('setDefaultConsentState');
const gtagSet = require('gtagSet');
const setInWindow = require('setInWindow');
const encodeUriComponent = require('encodeUriComponent');

const pCode = data.pCode;
const domain = data.domain;
const dataLayerPush = data.dataLayerPush;
const ccpaMessageId = data.ccpaMessageId;
const ccpa = data.ccpa;

const DENIED = 'denied';
const GRANTED = 'granted';

// Google Consent Mode
const ad_storage = data.ad_storage;
const ad_user_data = data.ad_user_data;
const analytics_storage = data.analytics_storage;
const functionality_storage = data.functionality_storage;
const personalization_storage = data.personalization_storage;
const ad_personalization = data.ad_personalization;
const security_storage = data.security_storage;

// url passthrough and ads data redaction
const urlPassthrough = data.urlPassthrough;
const adsRedaction = data.adsRedaction;
const overrideTemplateDefaultConsents = data.overrideTemplateDefaultConsents;


function constructURL(baseURL, params) {
  let queryString = '';
  for (const key in params) {
    if (params.hasOwnProperty(key)) {
      if (params[key] !== null && params[key] !== undefined) {
        if (queryString.length > 0) {
          queryString += '&';
        }
        queryString += key + '=' + encodeUriComponent(params[key]);
      }
    }
  }

  if (queryString.length > 0) {
    baseURL += '?' + queryString;
  }

  return baseURL;
}


const setDefaultConsents = () => {
    
 const defaultConsents = {};

  if (ad_storage !== 'na') {
    defaultConsents.ad_storage = ad_storage;
  }
  if (ad_user_data !== 'na') {
    defaultConsents.ad_user_data = ad_user_data;
  }
  if (analytics_storage !== 'na') {
    defaultConsents.analytics_storage = analytics_storage;
  }
  if (functionality_storage !== 'na') {
    defaultConsents.functionality_storage = functionality_storage;
  }
  if (personalization_storage !== 'na') {
    defaultConsents.personalization_storage = personalization_storage;
  }
  if (ad_personalization !== 'na') {
    defaultConsents.ad_personalization = ad_personalization;
  }
  if (security_storage !== 'na') {
    defaultConsents.security_storage = security_storage;
  }
  
  setDefaultConsentState(defaultConsents);
};

const main = () => {
  
  log('main', data);
  
  gtagSet({
    url_passthrough: urlPassthrough,
    ads_data_redaction: adsRedaction
  });
  
  const baseURL = 'https://cmp.inmobi.com/google-basic-consent/gtm.js';

  const params = {
    domain: domain,
    pCode: pCode,
    dataLayerPush: dataLayerPush,
    ccpaMessageId: ccpaMessageId,
    ccpa: ccpa,
    ad_storage: ad_storage,
    ad_user_data: ad_user_data,
    analytics_storage: analytics_storage,
    functionality_storage: functionality_storage,
    personalization_storage: personalization_storage,
    ad_personalization: ad_personalization,
    security_storage: security_storage,
    urlPassthrough: urlPassthrough,
    adsRedaction: adsRedaction,
    overrideTemplateDefaultConsents: overrideTemplateDefaultConsents == 'true' ? true: false
  };
  
  const preparedURL = constructURL(baseURL, params);
  
  const onSuccess = () => {
    log('onSuccess, setting google consents', data);
  };
  
  log('preparedURL is ', preparedURL);
  
  const onFailure = () => {log('onFailure');};
  
  injectScript(preparedURL, onSuccess, onFailure);

  data.gtmOnSuccess();
  
  setInWindow('overrideTemplateDefaultConsents', overrideTemplateDefaultConsents);
};


setDefaultConsents(); 
main();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.cmp.inmobi.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "analytics_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "functionality_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "personalization_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "security_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_user_data"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_personalization"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "overrideTemplateDefaultConsents"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "write_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "url_passthrough"
              },
              {
                "type": 1,
                "string": "ads_data_redaction"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 13/08/2024, 15:39:31
